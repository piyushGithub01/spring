CREATE SEQUENCE HIBERNATE_SEQUENCE START WITH 1 INCREMENT BY 1;

CREATE TABLE COMPANY (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
  NAME VARCHAR(255),
  PRIMARY KEY (ID),
  UNIQUE KEY COMPANY_NAME (NAME)
);

CREATE TABLE ADDRESS (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
  HOUSE_NUMBER VARCHAR(255),
  STREET VARCHAR(255),
  ZIP_CODE VARCHAR(255),
  PRIMARY KEY (ID)
);

CREATE TABLE CAR (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
  REGISTRATION_NUMBER VARCHAR(255),
  COMPANY_ID BIGINT,
  PRIMARY KEY (ID)
);

ALTER TABLE CAR ADD CONSTRAINT CAR_COMPANY FOREIGN KEY (COMPANY_ID) REFERENCES COMPANY;

CREATE TABLE DEPARTMENT (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
  NAME VARCHAR(255),
  COMPANY_ID BIGINT,
  PRIMARY KEY (ID)
);

ALTER TABLE DEPARTMENT ADD CONSTRAINT DEPARTMENT_COMPANY FOREIGN KEY (COMPANY_ID) REFERENCES COMPANY;

CREATE TABLE EMPLOYEE (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
  NAME VARCHAR(255),
  SURNAME VARCHAR(255),
  ADDRESS_ID BIGINT,
  DEPARTMENT_ID BIGINT,
  PRIMARY KEY (ID)
);

ALTER TABLE EMPLOYEE ADD CONSTRAINT FKGA73HDTPB67TWLR9C1I337TYT FOREIGN KEY (ADDRESS_ID) REFERENCES ADDRESS;
ALTER TABLE EMPLOYEE ADD CONSTRAINT FKBEJTWVG9BXUS2MFFSM3SWJ3U9 FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENT;

CREATE TABLE OFFICE (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
  NAME VARCHAR(255),
  ADDRESS_ID BIGINT,
  DEPARTMENT_ID BIGINT,
  PRIMARY KEY (ID)
);

ALTER TABLE OFFICE ADD CONSTRAINT FKGA73HDTPB67TWLR9C35357TYT FOREIGN KEY (ADDRESS_ID) REFERENCES ADDRESS;